<!--pages/component/vote/vote-image.wxml-->

<view class="container">
  <view class="page-body">
    <swiper current="{{swiperCur}}" class="vote-swiper" bindchange='onSwiperChange'>
      <block wx:for="{{pictureList}}" wx:for-item="item" wx:for-index="index" wx:key="idx">
        <swiper-item class="vote-swiper-item">
          <view class="vote-img-box" style="height:{{boxHeight}}px">
            <view class="vote-img-box-content">
              <!-- 单图 -->
              <image src="{{item.Picture}}" mode="widthFix" class="vote-img-box-pic"></image>
              <!-- 图片序号 -->
              <text class="vote-img-boxe-num" wx:if="{{item.VoteDetailID}}">{{item.VoteDetailID}}</text>
            </view>
            <!-- 图片描述 -->
            <view class="vote-img-des {{opacity?'on':bull}}">
              <text wx:if="{{item.FileDescription}}">{{item.FileDescription}}</text>
              <view class='vote-img-cha' catchtap="onSliderChaTap">
                <image src="../../../images/u268.png" class="vote-img-box-cha"></image>
              </view>
            </view>
          </view>

          <!-- 底部 -->
          <view class="vote-img-footer {{isIponeX?'ipone':''}}">
            <view class="look-left">
              <text class="look-left-rank">排名：{{item.VoteRank}}</text>
              <text>{{item.VotePraiseCount}}人喜欢</text>
            </view>
            <view class="look-right">
              <button open-type="share">
                <image src="../../../images/icon_fenxiang.png" class='look-right-contacts'></image>
              </button>
              <form bindsubmit="onShareToTimeline" report-submit='true' style="margin-left:82rpx;">
                <button form-type="submit">
                  <image src="../../../images/icon_pengyouquan.png" class="look-right-timeline"></image>
                </button>
              </form>
              <!-- “我的”点击过来的不需要点赞 -->
              <block wx:if="{{clickFrom == undefined}}">
                <block wx:if="{{item.IsVotePraise}}">
                  <form report-submit='true' style="margin-left:80rpx;">
                    <button form-type="submit">
                      <image src="../../../images/icon_dianzan_1.png" class="look-right-vote"></image>
                    </button>
                  </form>
                </block>
                <block wx:else>
                  <form bindsubmit="onPraisePicture" report-submit='true' style="margin-left:80rpx;">
                    <button form-type="submit">
                      <image src="../../../images/icon_dianzan.png" class="look-right-vote"></image>
                    </button>
                  </form>
                </block>
              </block>
            </view>
          </view>
        </swiper-item>
      </block>
    </swiper>

    <block wx:if="{{PreFileID}}">
      <image catchtap="onChangePrevPicture" src="../../../images/u263.png" class="swiper-btn-left {{isIponeX?'ipone':''}}"></image>
    </block>
    <block wx:if="{{NextFileID}}">
      <image catchtap="onChangeNextPicture" src="../../../images/u264.png" class="swiper-btn-right {{isIponeX?'ipone':''}}"></image>
    </block>

    <!-- 转发到朋友圈的图片 -->
    <view wx:if="{{showShareDialog}}" class="share-vote">
      <view class="share-vote-content">
        <image wx:if="{{shareVotePicture}}" src="{{shareVotePicture}}" class="share-vote-pic"></image>
        <text wx:if="{{saveImageToAlbumFinish}}" class="share-vote-text">图片已保存到相册，可分享朋友圈</text>
        <!-- <text class="share-vote-text">图片已保存到相册，可分享朋友圈</text> -->
        <image catchtap='onCloseShareDialog' src="../../../images/icon_guanbifenxiangtanceng.png" class="share-vote-cha"></image>
      </view>
    </view>
  </view>
</view>